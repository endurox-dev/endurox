TPADVERTISE(3)
==============
:doctype: manpage


NAME
----
tpadvertise, tpadvertise_full - advertise XATMI service


SYNOPSIS
--------
#include <atmi.h>

#define tpadvertise('_SVCNM', '_FNADDR') tpadvertise_full(_SVCNM, _FNADDR, #_FNADDR)

int tpadvertise_full (char \*svcnm, void (*)(TPSVCINFO *) 'func', char *'funcname');

Link with '-latmisrv|-latmisrvnomain|-latmisrvinteg -latmi -lubf -lnstd -lpthread -lrt -lm'

DESCRIPTION
-----------
Advertise service is done by function 'tpadvertise_full'. 'svcnm' is service name, services cannot start with reserved symbol '@', which are intended for Enduro/X system use. Service name cannot conntain symbols ',' and '/'. Max service name length is defined by *MAXTIDENT* constant. If length is longer, it will be truncated. 'func' is a pointer to service function. 'funcname' is name of the function that will be shown in *xadmin psc* listings. For compatibility with other systems C macro 'tpadvertise' is provided which consumes '_SVCNM' as service name, and '_FNADDR' as pointer to function. The function name is automatically generated by precompiler.

Function can be called during the server initialization phase (i.e. *tpsvrinit()* function) and during the runtime (i.e. for service function).

This function is available only for XATMI servers.

RETURN VALUE
------------
On success, *tpadvertise_full()* return zero; on error, -1 is returned, with *tperrno* set to indicate the error.


ERRORS
------
Note that *tpstrerror()* for returns generic error message plus custom message with debug info from last call.

*TPEMATCH* Service with given name is already advertised, and pointer to function is different. If pointer matches, that it is not an error.

*TPEOS* System failure occurred during serving. See logs i.e. user log, or debugs for more info. That could insufficient memory or other error.


EXAMPLE
-------
See *atmitest/test001_basiccall/atmisv1.c* for sample code.


BUGS
----
Report bugs to support@mavimax.com

SEE ALSO
--------
*tpunadvertise(3)*

COPYING
-------
(C) Mavimax, Ltd

